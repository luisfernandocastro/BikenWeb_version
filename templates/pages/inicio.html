{% extends 'root.html' %}
{% load static %}
{% load humanize %}


{% block title %}Biken | Inicio{%endblock%}
{% block content %}

<div class="container-fluid">
    {% include 'pages/components/carousel.html' %}

    <div class="container" id="myDiv">

        <div class="card-columns mt-5">
            {% for b in page %}
            <catalogo>
                <div class="card mb-5">
                    <a href="#" onclick="abrir_detailmodal('{% url 'descripcionbike' b.idmibicicleta %}')">
                        <img class="card-img-top imgcatalogo placeholderimgdown" src="{{b.foto.url}}" alt="Card image cap"></a>
                    <div class="card-body">
                        <p class="card-text textnamecard font-weight-bold">
                            <img src="{{b.user.perfil.get_image}}" alt="" class="imgperfil_post">
                            <a href="{% url 'perfil' b.user.username %}">{%if b.user.first_name == '' %}
                                {{ b.user.username}}
                                {%else%}
                                {{ b.user.first_name}} {{b.user.last_name}}
                                {%endif%}
                            </a>
                        </p>
    
                        <p class="card-text textcategoriacard text-capitalize font-weight-bold">{{b.categoria}}</p>
                        <p class="card-text texttiempocard">{{b.timestamp|naturaltime}}</p>
                        <p class="card-text textpreciocard">Alquiler <strong>${{b.precioalquiler}}</strong><i > {{b.valortiempohoras}} hora{{b.valortiempohoras|pluralize}}</i></p>
    
                        <!-- {{ num_messages }} message{{ num_messages|pluralize } -->
                        <div class="row">
                            <div class="col-lg-2">
                                <!-- circulo de color de la bicicleta de la card  -->
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="50" height="50"
                                    viewBox="0 0 120 120">
                                    <circle cx="60" cy="45" r="40" fill="{{b.color}}" />
                                </svg>
                            </div>
                            <div class="col-lg-10">
                                <button id=alert2 class="btn btncatalogo d-block mx-auto"><i class="far fa-heart"></i>
                                    Añadir a favoritas</button>                                
                            </div>
                        </div>
                    </div>
                </div>
            </catalogo>
            {% endfor %}
        </div>
        
    </div>


    {% include 'pages/components/pagination.html' %}

    <div class="modal fade" id="modaldetailBici" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">

    </div>


</div>


<script>
    var $ = jQuery.noConflict();
    function abrir_detailmodal(url){
        $('#modaldetailBici').load(url,function(){
            $(this).modal('show');
        });
    }
</script>

{% endblock %}

<script>
    $("#alert,#alert3,#alert5,#alert7,#alert9,#alert11").click(function () {
        Swal.fire({
            title: '<span class="title_alert">No has iniciado Sesión</span>',
            text: 'Inicia Sesión para continuar con el alquiler',
            showConfirmButton: true,
            confirmButtonColor: '#2059BD',
            buttonsStyling: true,
            showCloseButton: true,
            closeButtonAriaLabel: 'cerrar alerta',
        }).then((result) => {
            if (result.value) {
                window.location.href = "{% url 'login' %}"
            }
        });
    });


    $("#alert2,#alert4,#alert6,#alert8,#alert10,#alert12").click(function () {
        Swal.fire({
            title: '<span class="title_alert">No has iniciado Sesión</span>',
            text: 'Inicia Sesión para continuar con el alquiler',
            icon: 'info',
            confirmButtonText: 'Ok',
            confirmButtonColor: '#2059BD',
            padding: '2rem',
            showConfirmButton: true,
            buttonsStyling: true,
            showCloseButton: true,
            closeButtonAriaLabel: 'cerrar alerta',

        }).then((result) => {
            if (result.value) {
                window.location.href = "{% url 'login' %}"
            }
        });
    });

</script>